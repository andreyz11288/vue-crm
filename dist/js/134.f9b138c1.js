"use strict";(self["webpackChunkcrm"]=self["webpackChunkcrm"]||[]).push([[134],{4134:function(e,i,t){t.r(i),t.d(i,{default:function(){return h}});var l=t(3396),r=t(7139);const o={class:"page-title"},c={key:1,class:"center"},s={key:2},n={class:"progress"};function a(e,i,t,a,u,f){const g=(0,l.up)("Loader"),d=(0,l.up)("router-link"),w=(0,l.Q2)("tooltip");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",o,[(0,l._)("h3",null,(0,r.zw)(e.$filters.localize.localizeFilter("Planning")),1),(0,l._)("h4",null,(0,r.zw)(e.$filters.filter.currencyFilter(e.info.bill,e.info.currency)),1)]),e.loading?((0,l.wg)(),(0,l.j4)(g,{key:0})):e.categories.length?((0,l.wg)(),(0,l.iD)("section",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.categories,(i=>((0,l.wg)(),(0,l.iD)("div",{key:i.id},[(0,l._)("p",null,[(0,l._)("strong",null,(0,r.zw)(i.title),1),(0,l.Uk)(" "+(0,r.zw)(e.$filters.filter.currencyFilter(i.spend,e.info.currency))+" "+(0,r.zw)(e.$filters.localize.localizeFilter("fo"))+" "+(0,r.zw)(e.$filters.filter.currencyFilter(i.limit,e.info.currency)),1)]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Uk)((0,r.zw)(e.categories.length)+" ",1),(0,l._)("div",{class:(0,r.C_)(["determinate",[i.colorProgressBar]]),style:(0,r.j5)({width:i.progressPercent+"%"})},null,6)])),[[w,i.tooltip]])])))),128))])):((0,l.wg)(),(0,l.iD)("p",c,[(0,l.Uk)((0,r.zw)(e.$filters.localize.localizeFilter("No categories yet"))+". ",1),(0,l.Wm)(d,{to:"/categories"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.$filters.localize.localizeFilter("Add a new category")),1)])),_:1})]))])}var u=t(65),f=t(141),g={components:{Loader:f.Z},data:()=>({loading:!0,categories:[]}),computed:{...(0,u.Se)(["info"])},async mounted(){console.log(this.info.bill);const e=await this.$store.dispatch("fetchRecords"),i=await this.$store.dispatch("fetchCategories");this.categories=i.map((i=>{const t=e.filter((e=>e.categoryId===i.id)).filter((e=>"outcome"===e.type)).reduce(((e,i)=>e+ +i.amount),0),l=100*t/i.limit,r=l>100?100:l,o=l<60?"green":l<100?"yellow":"red",c=i.limit-t,s=`${c<0?this.$filters.localize.localizeFilter("Excess by"):this.$filters.localize.localizeFilter("Left")} ${this.$filters.filter.currencyFilter(Math.abs(c),this.info.currency)}`;return{...i,progressPercent:r,colorProgressBar:o,spend:t,tooltip:s}})),this.loading=!1}},d=t(89);const w=(0,d.Z)(g,[["render",a]]);var h=w}}]);
//# sourceMappingURL=134.f9b138c1.js.map