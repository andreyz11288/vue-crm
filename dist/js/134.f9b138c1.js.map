{"version":3,"file":"js/134.f9b138c1.js","mappings":"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","sources":["webpack://crm/./src/views/Planning.vue","webpack://crm/./src/views/Planning.vue?4d61"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"page-title\">\r\n      <h3>{{$filters.localize.localizeFilter('Planning')}}</h3>\r\n      <h4>{{$filters.filter.currencyFilter(info.bill, info.currency)}}</h4>\r\n    </div>\r\n\r\n    <Loader v-if=\"loading\"/>\r\n\r\n    <p v-else-if=\"!categories.length\" class=\"center\">{{$filters.localize.localizeFilter('No categories yet')}}. <router-link to=\"/categories\">{{$filters.localize.localizeFilter('Add a new category')}}</router-link></p>\r\n\r\n\r\n    <section v-else>\r\n        <div\r\n            v-for=\"cat in categories\"\r\n            :key=\"cat.id\"\r\n        >\r\n          <p>\r\n            <strong>{{cat.title}}</strong>\r\n            {{$filters.filter.currencyFilter(cat.spend, info.currency)}} {{$filters.localize.localizeFilter('fo')}} {{$filters.filter.currencyFilter(cat.limit, info.currency)}}\r\n          </p>\r\n          <div class=\"progress\" v-tooltip=\"cat.tooltip\">\r\n            {{categories.length}}\r\n            <div\r\n                class=\"determinate\"\r\n                :class=\"[cat.colorProgressBar]\"\r\n                :style=\"{width: cat.progressPercent + '%'}\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from \"vuex\";\r\nimport Loader from \"@/components/app/Loader.vue\";\r\nexport default {\r\n  components: {Loader},\r\n  data: () => ({\r\n    loading: true,\r\n    categories: [],\r\n  }),\r\n  computed: {\r\n    ...mapGetters(['info'])\r\n\r\n  },\r\n  async mounted() {\r\n    console.log(this.info.bill)\r\n\r\n    const records = await this.$store.dispatch('fetchRecords')\r\n    const categories = await this.$store.dispatch('fetchCategories')\r\n\r\n    this.categories = categories.map(cat => {\r\n      const spend = records\r\n          .filter(r => r.categoryId === cat.id)\r\n          .filter(r => r.type === 'outcome')\r\n          .reduce((total, record) => {\r\n            return total += +record.amount\r\n          }, 0)\r\n      const percent = 100 * spend / cat.limit\r\n      const progressPercent = percent > 100 ? 100 : percent\r\n      const colorProgressBar = percent < 60 ? 'green' : percent < 100 ? 'yellow' : 'red'\r\n      const tooltipValue = cat.limit - spend\r\n      const tooltip = `${tooltipValue < 0 ? this.$filters.localize.localizeFilter('Excess by') : this.$filters.localize.localizeFilter('Left')} ${this.$filters.filter.currencyFilter(Math.abs(tooltipValue), this.info.currency)}`\r\n\r\n      return {\r\n        ...cat, progressPercent, colorProgressBar, spend, tooltip\r\n      }\r\n    })\r\n\r\n    this.loading = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","import { render } from \"./Planning.vue?vue&type=template&id=5dba6e28\"\nimport script from \"./Planning.vue?vue&type=script&lang=js\"\nexport * from \"./Planning.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_toDisplayString","_ctx","$filters","localize","localizeFilter","filter","currencyFilter","info","bill","currency","loading","_createBlock","_component_Loader","key","categories","length","_hoisted_3","_Fragment","_renderList","cat","id","title","spend","limit","_hoisted_4","_normalizeClass","colorProgressBar","style","_normalizeStyle","width","progressPercent","tooltip","_hoisted_2","_createVNode","_component_router_link","to","components","Loader","data","computed","mapGetters","mounted","console","log","this","records","$store","dispatch","map","r","categoryId","type","reduce","total","record","amount","percent","tooltipValue","Math","abs","__exports__","render"],"sourceRoot":""}