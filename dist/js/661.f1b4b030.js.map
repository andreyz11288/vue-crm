{"version":3,"file":"js/661.f1b4b030.js","mappings":"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","sources":["webpack://crm/./src/views/Record.vue","webpack://crm/./src/views/Record.vue?707c"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"page-title\">\r\n      <h3>{{$filters.localize.localizeFilter('New entry')}}</h3>\r\n    </div>\r\n\r\n    <Loader v-if=\"loading\" />\r\n\r\n    <p v-else-if=\"!categories.length\" class=\"center\">{{$filters.localize.localizeFilter('No categories yet')}}. <router-link to=\"/categories\">{{$filters.localize.localizeFilter('Add a new category')}}</router-link></p>\r\n\r\n    <form v-else class=\"form\" @submit.prevent=\"handleSubmit\">\r\n      <div class=\"input-field\" >\r\n        <select ref=\"select\" v-model=\"category\">\r\n          <option\r\n              v-for=\"c in categories\"\r\n              :key=\"c.id\"\r\n              :value=\"c.id\"\r\n          >\r\n            {{c.title}}\r\n          </option>\r\n        </select>\r\n        <label>{{$filters.localize.localizeFilter('Add a new category')}}</label>\r\n      </div>\r\n\r\n      <p>\r\n        <label>\r\n          <input\r\n              class=\"with-gap\"\r\n              name=\"type\"\r\n              type=\"radio\"\r\n              value=\"income\"\r\n              v-model=\"type\"\r\n          />\r\n          <span>{{$filters.localize.localizeFilter('Income')}}</span>\r\n        </label>\r\n      </p>\r\n\r\n      <p>\r\n        <label>\r\n          <input\r\n              class=\"with-gap\"\r\n              name=\"type\"\r\n              type=\"radio\"\r\n              value=\"outcome\"\r\n              v-model=\"type\"\r\n          />\r\n          <span>{{$filters.localize.localizeFilter('Outcome')}}</span>\r\n        </label>\r\n      </p>\r\n\r\n      <div class=\"input-field\">\r\n        <input\r\n            id=\"amount\"\r\n            type=\"number\"\r\n            v-model.number=\"amount\"\r\n            :class=\"{invalid: v$.amount.$dirty && v$.amount.minValue.$invalid}\"\r\n        >\r\n        <label for=\"amount\">{{$filters.localize.localizeFilter('Sum')}}</label>\r\n        <span\r\n            class=\"helper-text invalid\"\r\n            v-if=\"v$.amount.$dirty && v$.amount.minValue.$invalid\"\r\n        >\r\n           {{$filters.localize.localizeFilter('Minimum value')}} {{v$.amount.minValue.$params.min}}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"input-field\">\r\n        <input\r\n            id=\"description\"\r\n            type=\"text\"\r\n            v-model=\"description\"\r\n            :class=\"{invalid: v$.description.$dirty && v$.description.required.$invalid}\"\r\n        >\r\n        <label for=\"description\">{{$filters.localize.localizeFilter('Description')}}</label>\r\n        <span\r\n            class=\"helper-text invalid\"\r\n            v-if=\"v$.description.$dirty && v$.description.required.$invalid\"\r\n        >\r\n          {{$filters.localize.localizeFilter('Enter a description')}}\r\n        </span>\r\n      </div>\r\n\r\n      <button class=\"btn waves-effect waves-light\" type=\"submit\">\r\n        {{$filters.localize.localizeFilter('Create')}}\r\n        <i class=\"material-icons right\">send</i>\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Loader from \"@/components/app/Loader.vue\";\r\nimport { useVuelidate } from '@vuelidate/core'\r\nimport {required, minValue} from '@vuelidate/validators'\r\nimport {mapGetters} from 'vuex'\r\nexport default {\r\n  name: 'record',\r\n  setup: () => ({ v$: useVuelidate() }),\r\n  components: {Loader},\r\n  data: () => ({\r\n    loading: true,\r\n    categories: [],\r\n    category: null,\r\n    type: 'income',\r\n    amount: 1,\r\n    description: '',\r\n  }),\r\n  async mounted() {\r\n    this.categories = await this.$store.dispatch('fetchCategories')\r\n    this.loading = false\r\n\r\n\r\n    if (this.categories.length) {\r\n      this.category = this.categories[0].id\r\n    }\r\n\r\n    setTimeout(() => {\r\n      this.select = M.FormSelect.init(this.$refs.select);\r\n      M.updateTextFields();\r\n    }, 0)\r\n  },\r\n  validations: {\r\n    description: {required},\r\n    amount: {minValue: minValue(1)}\r\n  },\r\n  computed: {\r\n    ...mapGetters(['info']),\r\n    canCreateRecord() {\r\n      if (this.type === 'income') {\r\n        return true\r\n      }\r\n\r\n      return this.info.bill >= this.amount\r\n    }\r\n  },\r\n  methods: {\r\n    async handleSubmit() {\r\n      if (this.v$.$invalid) {\r\n        this.v$.$touch()\r\n        return\r\n      }\r\n\r\n      if (this.canCreateRecord) {\r\n        try {\r\n          await this.$store.dispatch('createRecord', {\r\n            categoryId: this.category,\r\n            amount: this.amount,\r\n            description: this.description,\r\n            type: this.type,\r\n            date: new Date().toJSON()\r\n          })\r\n          const bill = this.type === 'income'\r\n              ? this.info.bill + this.amount\r\n              : this.info.bill - this.amount\r\n\r\n          await this.$store.dispatch('updateInfo', {bill})\r\n          M.toast({html: this.$filters.localize.localizeFilter('Entry created successfully')})\r\n          this.v$.$reset()\r\n          this.amount = 1\r\n          this.description = ''\r\n        } catch (e) {\r\n          console.log(e)\r\n        }\r\n        \r\n      }else {\r\n        M.toast({html: `${this.$filters.localize.localizeFilter('Insufficient funds in the account')} ${this.amount - this.info.bill}`})\r\n      }\r\n    }\r\n  },\r\n  deactivated() {\r\n    if (this.select && this.select.deactivated) {\r\n      this.select.deactivated()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","import { render } from \"./Record.vue?vue&type=template&id=7fe46c1c\"\nimport script from \"./Record.vue?vue&type=script&lang=js\"\nexport * from \"./Record.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","for","type","_createElementVNode","_createElementBlock","_hoisted_1","_toDisplayString","_ctx","$filters","localize","localizeFilter","loading","_createBlock","_component_Loader","key","categories","length","onSubmit","_cache","_withModifiers","args","$options","handleSubmit","_hoisted_3","ref","category","$event","_Fragment","_renderList","c","id","value","title","_hoisted_4","name","_hoisted_5","amount","_normalizeClass","invalid","v$","$dirty","minValue","$invalid","_hoisted_6","_hoisted_7","$params","min","_hoisted_8","description","required","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_2","_createVNode","_component_router_link","to","setup","useVuelidate","components","Loader","data","mounted","this","$store","dispatch","setTimeout","select","M","FormSelect","init","$refs","updateTextFields","validations","computed","mapGetters","canCreateRecord","info","bill","methods","$touch","categoryId","date","Date","toJSON","toast","html","$reset","e","console","log","deactivated","__exports__","render"],"sourceRoot":""}