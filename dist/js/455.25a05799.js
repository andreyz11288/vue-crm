"use strict";(self["webpackChunkcrm"]=self["webpackChunkcrm"]||[]).push([[455],{455:function(e,t,r){r.r(t),r.d(t,{default:function(){return B}});var l=r(3396),s=r(7139),i=r(9242);const a={class:"page-title"},c=(0,l._)("i",{class:"material-icons"},"refresh",-1),n=[c],o={key:1,class:"row"};function u(e,t,r,c,u,d){const h=(0,l.up)("Loader"),f=(0,l.up)("HomeBill"),w=(0,l.up)("HomeCurrency");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",a,[(0,l._)("h3",null,(0,s.zw)(e.$filters.localize.localizeFilter("Bill")),1),(0,l._)("button",{class:"btn waves-effect waves-light btn-small",onClick:t[0]||(t[0]=(0,i.iM)(((...e)=>d.refresh&&d.refresh(...e)),["prevent"]))},n)]),e.loading?((0,l.wg)(),(0,l.j4)(h,{key:0})):((0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(f,{rates:e.currency.rates},null,8,["rates"]),(0,l.Wm)(w,{rates:e.currency.rates,date:e.currency.date},null,8,["rates","date"])]))])}const d={class:"col s12 m6 l4"},h={class:"card light-blue bill-card"},f={class:"card-content white-text"},w={class:"card-title"},g={key:"cur",class:"currency-line"};function y(e,t,r,i,a,c){return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",h,[(0,l._)("div",f,[(0,l._)("span",w,(0,s.zw)(e.$filters.localize.localizeFilter("Bill in currency")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.currencies,(t=>((0,l.wg)(),(0,l.iD)("p",g,[(0,l._)("span",null,(0,s.zw)(e.$filters.filter.currencyFilter(c.getCurrency(t),t)),1)])))),128))])])])}var p={props:["rates"],data:()=>({currencies:["UAH","USD","EUR"]}),computed:{base(){return"UAH"===this.$store.getters.info.currency?this.$store.getters.info.bill/(this.rates["UAH"]/this.rates["EUR"]):"USD"===this.$store.getters.info.currency?this.$store.getters.info.bill/(this.rates["USD"]/this.rates["EUR"]):"EUR"===this.$store.getters.info.currency?this.$store.getters.info.bill:void 0}},methods:{getCurrency(e){return Math.floor(this.base*this.rates[e])}}},m=r(89);const z=(0,m.Z)(p,[["render",y]]);var _=z;const v={class:"col s12 m6 l8"},$={class:"card orange darken-3 bill-card"},b={class:"card-content white-text"},D={class:"card-header"},U={class:"card-title"};function C(e,t,r,i,a,c){return(0,l.wg)(),(0,l.iD)("div",v,[(0,l._)("div",$,[(0,l._)("div",b,[(0,l._)("div",D,[(0,l._)("span",U,(0,s.zw)(e.$filters.localize.localizeFilter("Currencies rates")),1)]),(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.$filters.localize.localizeFilter("Currency")),1),(0,l._)("th",null,(0,s.zw)(e.$filters.localize.localizeFilter("Rate")),1),(0,l._)("th",null,(0,s.zw)(e.$filters.localize.localizeFilter("Date")),1)])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.currencies,(e=>((0,l.wg)(),(0,l.iD)("tr",null,[(0,l._)("th",null,(0,s.zw)(e),1),(0,l._)("th",null,(0,s.zw)(r.rates[e].toFixed(2)),1),(0,l._)("th",null,(0,s.zw)(r.date),1)])))),256))])])])])])}var H={props:["rates","date"],data:()=>({currencies:["UAH","USD","EUR"]})};const F=(0,m.Z)(H,[["render",C]]);var k=F,E=r(141),R=r(6530),S=r(2524),Z={name:"Home",components:{Loader:E.Z,HomeBill:_,HomeCurrency:k},setup:()=>(0,R.u)({title:(0,l.Fl)((()=>S.Z.localizeFilter("Home"))),meta:[{"http-equiv":"Content-Security-Policy",content:"upgrade-insecure-requests"}]}),data:()=>({loading:!0,currency:null}),async mounted(){this.currency=await this.$store.dispatch("fetchCurrency");const e=await this.$store.dispatch("fetchEmail");e&&await this.$store.dispatch("updateInfo",{email:e}),this.loading=!1},methods:{async refresh(){this.loading=!0,this.currency=await this.$store.dispatch("fetchCurrency"),this.loading=!1}}};const A=(0,m.Z)(Z,[["render",u]]);var B=A}}]);
//# sourceMappingURL=455.25a05799.js.map